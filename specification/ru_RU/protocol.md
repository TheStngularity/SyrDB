# Спецификация `SyrDB Protocol` 0.1
## `1.` Двоичный (бинарный) шаблоный
### `1.1.` Запрос
```py
Request {
    Byte     op      (1);
    Header[] headers (N);
    Content  content (N);
}
```
> ###### *Таблица `#1`*
> Название блока | Длина (байты : биты) | Тип        | Описание
> -------------- | -------------------- | ---------- | ----------------------------------
> `op`           | `1 : 8`              | `Byte`     | Тип запроса (операции, см. `3.1.`)
> `headers`      | `N : B * 8`¹         | `Header[]` | Загаловки запроса (см `2.2.`)
> `content`      | `N : B * 8`¹         | `Content`  | Содержимое запроса (см `2.3.`)

### `1.2.` Ответ
```py
Response {
    Byte     status-code (1);
    Header[] headers     (N);
    Content  content     (N);
}
```
> ###### *Таблица `#2`*
> Название блока | Длина (байты : биты) | Тип        | Описание
> -------------- | -------------------- | ---------- | ------------------------------
> `status-code`  | `1 : 8`              | `Byte`     | Код статуса ответа (см `3.2.`)
> `headers`      | `N : B * 8`¹         | `Header[]` | Загаловки ответа (см `2.2.`)
> `content`      | `N : B * 8`¹         | `Content`  | Содержимое ответа (см `2.3.`)

## `2.` Типы данных
### `2.1.` Основные типы
Все типы данного протокола взяты с [`BDSF`](https://github.com/TheStngularity/BDSF/blob/main/specification/ru_RU.md)

### `2.2.` Загаловки `запросов` и `ответов`
#### `2.2.1.` Формат загаловков
```py
Header {
    Byte   header (1);
    UInt16 length (1);
    ?      value  (N);
}
```
> ###### *Таблица `#3`*
> Название блока | Длина (байты : биты) | Тип      | Описание
> -------------- | -------------------- | -------- | ---------------------------
> `header`       | `1 : 8`              | `Byte`   | ID загаловка
> `length`       | `1 : 8`              | `UInt16` | Длина содержимого загаловка
> `value`        | `N : B * 8`¹         | `?`      | Содержимое загаловка

#### `2.2.2.` Загаловки
###### *Таблица `#4`*
Байт-код | Название        | Тип                       | З/О  | Описание
-------- | --------------- | ------------------------- | ---- | ----------------------------------
`0x1`    | **Provider**    | `Provider` (см. `2.2.3.`) | З    | Провайдер подключения (библиотека)
`0x2`    | **Version**     | `UInt16` (см. `2.2.4.`)   | З, О | Версия протокола
`0x3`    | **Description** | `String`                  | О    | Описание ответа
> `З` - Запрос; `О` - Ответ

#### `2.2.3.` Провайдер подключения
```py
Provider {
    String   language (N);
    String   name     (N);
    String   version  (N);
    Byte[16] id       (16);
}
```
> ###### *Таблица `#5`*
> Название блока | Длина (байты : биты) | Тип        | Описание
> -------------- | -------------------- | ---------- | ----------------------------------------------------------------------------------------------------
> `language`     | `N : B * 8`¹         | `String`   | Название языка провайдера
> `name`         | `N : B * 8`¹         | `String`   | Название провайдера
> `version`      | `N : B * 8`¹         | `String`   | Версия провайдера
> `id`           | `16 : 128`           | `Byte[16]` | ID провайдера (библиотеки)<br>Если такого нет, то `00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00`.

#### `2.2.4.` Версии протокола
###### *Таблица `#6`*
Байт    | Версия         | Описание
------- | -------------- | -----------------------------
`00 01` | `0.0.1a1.dev1` | Первая версия это базы данных

## `3.` Код статуса ответа и коды операции
### `3.1.` Коды операции
###### *Таблица `#7`*
Байт-код | Категория | Описание


---
- ¹ - `N` = любое число; `B` = кол-во байт.
